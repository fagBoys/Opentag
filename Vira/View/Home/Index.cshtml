@inject Vira.Core.Services.Interfaces.IProductService _ProductService
@model Vira.Core.DTOs.Home.IndexViewModel
@inject Vira.Core.Services.Interfaces.IUserService _userService
@*@{
    ViewData["Title"] = "متن";
}*@
@{
    //Layout = "_MainLayout";
    var browserId = ViewBag.browserId;
}


@{
    var userSet = "0";
    if (User.Identity.Name != null)
    {
        userSet = (_userService.GetUserIdByUserName(User.Identity.Name)).ToString();
    }
    else
    {
        //Set Ip here
    }
}
<!-- Font Awesome -->
<link rel="stylesheet" href="/plugins/font-awesome/css/font-awesome.min.css">
<style>
    .thisd {
        display: block;
        width: 40px;
        height: 40px;
        background: #c14f68 !important;
        /*background: -webkit-linear-gradient(-45deg, #9b1592 0, #7e1176 25%, #6e0f68 50%, #5e0c59 75%, #41083d 100%)!important;*/
        /*background: -webkit-linear-gradient(-45deg, #c14f68 0, #b2485f 25%, #9b3d52 50%, #793040 75%, #662936 100%)!important;*/
        opacity: 0.6;
        position: sticky;
        bottom: 10px;
        left: 10px;
    }

    .floating-chat {
        /*background: -webkit-linear-gradient(-45deg, #c14f68 0, #b2485f 25%, #9b3d52 50%, #793040 75%, #662936 100%)!important;*/
        background: #c14f68 !important;
        /*background: -webkit-linear-gradient(-45deg, #9b1592 0, #7e1176 25%, #6e0f68 50%, #5e0c59 75%, #41083d 100%)!important;*/
    }

    .MyDocm {
        color: silver;
    }

        .MyDocm :hover {
            color: black;
        }
</style>

<div class="container-fluid p-0">
    <div id="carouselExampleCaptions" class="carousel slide carousel-fade" data-bs-ride="false">
        <div class="carousel-indicators">
            @if (Model.Sliders != null)
            {
                foreach (var slide in Model.Sliders.Select((value, i) => (value, i)))
                {
                    if (slide.i == 0)
                    {
                        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"
                    aria-current="true" aria-label="Slide 1"></button>
                    }
                    else
                    {
                        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="@slide.i"
                    aria-label="Slide @slide.i"></button>
                    }
                }
            }
        </div>
        <div class="carousel-inner">

            @if (Model.Sliders != null)
            {
                foreach (var slide in Model.Sliders.Select((value, i) => (value, i)))
                {
                    if (slide.i == 0)
                    {
                        <div class="carousel-item active">
                            <img src="~/img/Slider/Image/@slide.value.ImageName" class="d-none d-md-block w-100" alt="...">
                            <img src="~/img/Slider/PhoneImage/@slide.value.PhoneImageName" class="d-block d-md-none w-100" alt="...">
                            <div class="carousel-caption d-none d-md-block">
                                <button href="@slide.value.Linke" class="btn btn-outline-light mb-2">@slide.value.ButtonText</button>
                                <!-- <p>Some representative placeholder content for the first slide.</p> -->
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="carousel-item">
                            <img src="~/img/Slider/Image/@slide.value.ImageName" class="d-none d-md-block w-100" alt="...">
                            <img src="~/img/Slider/PhoneImage/@slide.value.PhoneImageName" class="d-block d-md-none w-100" alt="...">
                            <div class="carousel-caption d-none d-md-block">
                                <button href="@slide.value.Linke" class="btn btn-outline-light mb-2">@slide.value.ButtonText</button>
                                <!-- <p>Some representative placeholder content for the second slide.</p> -->
                            </div>
                        </div>
                    }
                }
            }

        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions"
                data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions"
                data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</div>

<div class="container">

    <section class="CategorySection mt-5" dir="rtl">
        <h2 class="text-center text-danger">گروه محصولات</h2>
        <div class="row">
            <div class="col-6 mt-4 position-relative">
                <div class="opacity-100 h-100 bg-danger rounded-4 rounded-md-5">
                    <a href="/Product?selectedGroups=5">
                        <div class="category-gradient position-absolute h-100"></div>
                        <img class="rounded-4 rounded-md-5 hover-overlay w-100 h-100"
                             src="~/img/Category Section/scarf-gradient.jpg" alt="Scarf category">
                        <div class="position-absolute m-3 m-lg-4 end-0 bottom-0 rounded-circle hover-icon d-inline bg-danger">
                        </div>
                    </a>
                </div>
                <div class="row w-100 position-absolute bottom-0">
                    <div class="col-12 p-3 p-lg-4 text-end">
                        <a href="/Product?selectedGroups=5">
                            <img class="d-none d-md-inline" src="~/img/icon/shal-icon.png" alt="">
                            <h4 class="text-light d-inline">شال و روسری</h4>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-6 mt-4 position-relative rounded-4 rounded-md-5">
                <a href="/Product?selectedGroups=12">
                    <div class="rounded-4 rounded-md-5 opacity-100 bg-danger">
                        <img class="rounded-4 rounded-md-5 hover-overlay w-100 h-100"
                             src="~/img/Category Section/palto-gradient.jpg" alt="Palto category">
                        <div class="position-absolute m-3 m-lg-4 end-0 bottom-0 rounded-circle hover-icon d-inline bg-danger">
                        </div>
                    </div>
                </a>
                <div class="row w-100 position-absolute bottom-0">
                    <div class="col-12 p-3 p-lg-4 text-end">
                        <a href="/Product?selectedGroups=12">
                            <img class="d-none d-md-inline" src="~/img/icon/monto-icon.png" alt="">
                            <h4 class="text-light d-inline">خرید پالتو و پافر</h4>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">

            <div class="col-4 mt-4 overlay3 position-relative rounded-4 rounded-md-5">
                <a href="/Product?selectedGroups=23">
                    <div class="rounded-4 rounded-md-5 opacity-100 bg-danger">
                        <img class="rounded-4 rounded-md-5 hover-overlay w-100 h-100"
                             src="~/img/Category Section/boot-gradient.jpg" alt="">
                        <div class="position-absolute m-3 m-lg-4 end-0 bottom-0 rounded-circle hover-icon d-inline bg-danger">
                        </div>
                    </div>
                </a>

                <div class="row w-100 position-absolute bottom-0">
                    <div class="col-12 p-3 p-lg-4 text-end">
                        <a href="/Product?selectedGroups=23">
                            <img class="d-none d-md-inline" src="~/img/icon/boot-icon.png" alt="">
                            <h4 class="text-light d-inline">بوت زنانه</h4>
                        </a>
                    </div>
                </div>


            </div>

            <div class="col-4 mt-4 position-relative rounded-4 rounded-md-5">
                <a href="/Product?selectedGroups=25">
                    <div class="rounded-4 rounded-md-5 opacity-100 bg-danger">
                        <img class="rounded-4 rounded-md-5 hover-overlay w-100 h-100"
                             src="~/img/Category Section/bag-gradient.jpg" alt="">
                        <div class="position-absolute m-3 m-lg-4 end-0 bottom-0 rounded-circle hover-icon d-inline bg-danger">
                        </div>
                    </div>
                </a>
                <div class="row w-100 position-absolute bottom-0">
                    <div class="col-12 p-3 p-lg-4 text-end">
                        <a href="/Product?selectedGroups=25">
                            <img class="d-none d-md-inline" src="~/img/icon/kif-icon.png" alt="">
                            <h4 class="text-light d-inline">کیف زنانه</h4>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-4 mt-4 position-relative rounded-4 rounded-md-5">
                <a href="/Product?selectedGroups=3">
                    <div class="rounded-4 rounded-md-5 opacity-100 bg-danger">
                        <img class="rounded-4 rounded-md-5 hover-overlay w-100 h-100"
                             src="~/img/Category Section/accessory-gradient.jpg" alt="">
                        <div class="position-absolute m-3 m-lg-4 end-0 bottom-0 rounded-circle hover-icon d-inline bg-danger">
                        </div>
                    </div>
                </a>
                <div class="row w-100 position-absolute bottom-0">
                    <div class="col-12 p-3 p-lg-4 text-end">
                        <a href="/Product?selectedGroups=25">
                            <img class="d-none d-md-inline" src="~/img/icon/accessory-icon.png" alt="">
                            <h4 class="text-light d-inline">اکسسوری زنانه</h4>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<div class="container-fluid p-0">
    <div class="row m-0 mt-5">
        <h2 class="text-center text-danger">محصولات جدید</h2>
        <div class="col-12 col-md-10 p-0 d-flex d-inline">
            <section class="slider half-screen w-100 mt-5 text-center">
                @if (Model != null)
                {
                    @foreach (var item in Model.ProductsList)
                    {
                        <partial name="_BoxProduct" model="@item" />
                    }
                }
                else
                {
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3 "
                         src="~/img/Product/Images/img01.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl"><strong>۳۳۹,۰۰۰</strong> تومان</p>
                    </div>
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3"
                         src="~/img/Product/Images/img02.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl">
                            <del class="text-secondary">۲۹۹,۰۰۰</del> <span class="badge bg-danger">٪۳۳</span> <strong>۱۹۹,۴۳۳</strong> تومان
                        </p>
                    </div>
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3"
                         src="~/img/Product/Images/img03.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl"><strong>۳۳۹,۰۰۰</strong> تومان</p>
                    </div>
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3"
                         src="~/img/Product/Images/img04.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl"><strong>۳۳۹,۰۰۰</strong> تومان</p>
                    </div>
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3"
                         src="~/img/Product/Images/img05.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl"><strong>۳۳۹,۰۰۰</strong> تومان</p>
                    </div>
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3"
                         src="~/img/Product/Images/img06.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl"><strong>۳۳۹,۰۰۰</strong> تومان</p>
                    </div>
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3"
                         src="~/img/Product/Images/img07.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl"><strong>۳۳۹,۰۰۰</strong> تومان</p>
                    </div>
                }
            </section>
        </div>
        <div class="col-12 d-none d-md-block col-md-2 d-flex">
            <div class="row h-100 m-0 align-content-center justify-content-center">
                <div class="col-12 text-center" style="width: 200px;">
                    <img class="w-100" src="~/img/Berlance1-logo-small.png" alt="">
                </div>
                <div class="col-12 p-0 text-center">
                    <button class="MyDocm btn border rounded-circle slide-half-prev p-1"
                            style="width: 58px; height: 58px;">
                        <i class="fa fa-angle-left fa-2x" aria-hidden="true"></i>
                    </button>
                    <button class="MyDocm btn border rounded-circle slide-half-next p-1"
                            style="width: 58px; height: 58px;">
                        <i class="fa fa-angle-right fa-2x" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container d-none">

    <section class="AdsSection mt-5">
        <div class="row">
            <div class="col-6 mt-4">
                <figure>
                    <img class="w-100 rounded-5 Ad1" src="~/img/Ads/Ads2.jpg" alt="">
                </figure>
            </div>
            <div class="col-6 mt-4">
                <figure>
                    <img class="w-100 rounded-5 Ad2" src="~/img/Ads/Ads3.jpg" alt="">
                </figure>
            </div>
        </div>
    </section>

</div>

<div class="container-fluid p-0">
    <div class="row m-0 mt-5">
        <h2 class="text-center text-danger">پرفروشترین محصولات</h2>
        <div class="col-12 p-0">
            <section class="slider full-screen mt-5 text-center">
                @if (Model != null)
                {
                    var p = _ProductService.GetPopularProduct().DistinctBy(p => p.ProductId);
                    @foreach (var item in p)
                    {
                        <partial name="_BoxProduct" model="@item" />
                    }
                }
                else
                {
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3 "
                         src="~/img/Product/Images/img08.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl"><strong>۳۳۹,۰۰۰</strong> تومان</p>
                    </div>
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3"
                         src="~/img/Product/Images/img09.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl">
                            <del class="text-secondary">۲۹۹,۰۰۰</del> <span class="badge bg-danger">٪۳۳</span> <strong>۱۹۹,۴۳۳</strong> تومان
                        </p>
                    </div>
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3"
                         src="~/img/Product/Images/img10.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl"><strong>۳۳۹,۰۰۰</strong> تومان</p>
                    </div>
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3"
                         src="~/img/Product/Images/img11.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl"><strong>۳۳۹,۰۰۰</strong> تومان</p>
                    </div>
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3"
                         src="~/img/Product/Images/img12.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl"><strong>۳۳۹,۰۰۰</strong> تومان</p>
                    </div>
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3"
                         src="~/img/Product/Images/img13.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl"><strong>۳۳۹,۰۰۰</strong> تومان</p>
                    </div>
                    <div class="mx-2 product-box">
                        <img class="rounded-4 mb-3"
                         src="~/img/Product/Images/img14.jpg">
                        <h6>مانتو پانچ لینن راه راه کد 5276</h6>
                        <p class="mt-2" dir="rtl"><strong>۳۳۹,۰۰۰</strong> تومان</p>
                    </div>
                }
            </section>
        </div>
    </div>


    <div class="row d-none d-md-block m-0 mt-2">
        <div class="col-12 p-0 text-center">
            <button class="MyDocm btn border rounded-circle slide-half-prev p-1"
                    style="width: 58px; height: 58px;">
                <i class="fa fa-angle-left fa-2x" aria-hidden="true"></i>
            </button>
            <button class="MyDocm btn border rounded-circle slide-half-next p-1"
                    style="width: 58px; height: 58px;">
                <i class="fa fa-angle-right fa-2x" aria-hidden="true"></i>
            </button>
        </div>
    </div>
</div>

<div class="container">
    <section>
        <div class="row mt-5">
            <div class="col-12 col-md-5 mt-5 order-last order-md-first">
                <video class="h-100 w-100" autoplay="" muted="" loop="">
                    <source src="~/video/Video-mainpage.mp4" type="video/mp4">
                </video>
            </div>
            <div class="col-12 col-md-7 mt-5 text-end order-md-last">
                @{

                    var op = "<";

                }
                <div class=" d-none d-md-block">
                    <div class="row">
                        <div class="col text-start text-muted">
                            <a href="Article" class="d-inline" style="color:rgb(129, 128, 128)!important;">
                                @op
                            </a>
                            <a href="Article" class="d-inline" style="color:rgb(129, 128, 128)!important;">مشاهده آرشیو</a>
                        </div>
                        <div class="col text-end h3">
                            برلنس بلاگ
                        </div>
                    </div>
                </div>
                <partial name="_BlogPost" dir="rtl" />


            </div>
        </div>
    </section>
</div>

<div class="container">
    <div class="row mt-5">
        <div class="col-12">
            <a asp-controller="Home" asp-action="AddContactUs">
                <img class="rounded-5 w-100" src="~/img/banner01.jpg" alt="فروشگاه حضوری برلنس کجاست؟">
            </a>
        </div>
    </div>
    <div class="row mt-5 justify-content-center">
        <div class="col-6 text-center">
            <a href="https://www.instagram.com/berlance.qom/">
                <img class="d-inline" src="img/instagram.svg" alt="">
                <h5 class="mt-2">ما را دنبال کنید</h5>
                <h5 class="my-2">berlance</h5>
            </a>
        </div>
    </div>
</div>


@{
    var userId = "Empty";
    if (User.Identity.Name != null)
    {
        userId = (_userService.GetUserIdByUserName(User.Identity.Name)).ToString();
    }
    var userIp = ViewBag.Ip;
}

<link rel="stylesheet" href='Chat/ChatStyle.css'>


<div>
    <!-- partial:index.partial.html -->
    <div style="position:sticky; z-index:2!important;">
        <div class="floating-chat">
            <i class="fa fa-comments fa-lg" aria-hidden="false"></i>
            <div class="chat">
                <div class="header">
                    <span class="title text-white text-end " dir="rtl">
                        <label class="fs-6">
                            سلام، کاربر عزیز چه طور میتونم کمکتون کنم ؟
                        </label>
                    </span>
                    <button>
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </button>
                </div>
                <ul class="messages">
                    @foreach (var item in Model.MessengerSupports)
                    {
                        if (item.State.ToString() == "Sander") //User
                        {
                            <li class="other text-end " dir="rtl">
                                <a class="text-white row p-3 pt-0 pb-0"></a>
                                @item.Message.ToString()
                            </li>
                        }
                        else //Admin
                        {
                            <li class="self text-end " dir="rtl">
                                <a class="text-white row p-3 pt-0 pb-0" dir="ltr">Admin:</a>
                                @item.Message.ToString()
                            </li>
                        }
                    }


                </ul>
                <form method=post class="footer" asp-controller="Messenger" asp-action="SendMessage" dir="ltr">
                    <button type=submit id="sendMessage" class="text-box2">ارسال</button>
                    @*<div class="text-box" contenteditable="true" disabled="true"></div>*@
                    <input dir="rtl" name="Message" contenteditable="true" class="border border-0 rounded text-box " disabled="true">
                    <input name="UserId" value="@userId" class="text-box d-none" contenteditable="true">
                    <input name="BrowserId" value="@browserId" class="text-box d-none" contenteditable="true">
                    <input name="Ip" value="@Model.Ip" class="text-box d-none" contenteditable="true">
                </form>

            </div>
        </div>

    </div>
</div>

@*<div id="ShowComment" class="" dir="rtl">
        <form id="formFilters" class="p-3" asp-controller="Messenger" asp-action="Index" data-ajax="true"
            data-ajax-method="get"
            data-ajax-mode="replace"
            data-ajax-update="#listComment"
            data-ajax-success="Success">
            <div class="pt-2 d-none">
                <button type="submit" class="btn btn-success text-center">
                    ثبت دیدگاه
                </button>
            </div>
        </form>
</div>
<div class="comment-list p-4" id="listComment" dir="rtl">
</div>*@



<!--This is for making Ajax real time --->
@*
<script src="~/js/jquery.validate.min.js"></script>
<script src="~/js/jquery.unobtrusive-ajax.min.js"></script>
<script>
    $("#formFilters").submit();
</script>
<script>
    function Success()
    {
        $("#comment_Comment").val("");
    }
    $(function ()
    {
        $("#listComment").load("/Messenger");
    });

    function pageComment(pageid)
    {
        $("#listComment").load("/Messenger/Index/" + @userSet.ToString());
    }
</script>*@
